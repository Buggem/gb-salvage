<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>ECE238Spr08/tutorials/GameBoyTileDesigner - CRATEL Wiki</title>
<link rel="stylesheet" type="text/css" href="../../../style.css">
</head>
<body>

<div class="wayback">Page retrieved from the <a class="wayback" href="https://web.archive.org/web/20100703231214/http://cratel.wichita.edu/cratel/ECE238Spr08/tutorials/GameBoyTileDesigner">Internet Archive Wayback Machine</a>
<!--
     FILE ARCHIVED ON 23:12:14 Jul 03, 2010 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 13:36:51 Jul 25, 2020.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-2"></span><p class="line867">
</p><h1 id="head-5c755811d8135fb260a0f3957e952a5def0de2ee">Use the GameBoy Tile Designer and Map Builder</h1>
<span class="anchor" id="line-3"></span><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li><a href="#head-5c755811d8135fb260a0f3957e952a5def0de2ee">Use the GameBoy Tile Designer and Map Builder</a><ol><li><a href="#head-575156eff9048ac8d7a0d9fd282dea263eb9b083">GameBoy Tile Designer</a><ol><li><a href="#head-221a443801ebd3dd6362a1059d73c40bb34cf99e">Overview</a></li><li><a href="#head-b33fc876ee241f0f5167e31a6aa6dfb87c4c5891">import/export</a><ol><li><a href="#head-f32b8c7ed0a020d68952304ce6eadbbafbdc67a6">export from GBTD</a></li><li><a href="#head-bcc30779af6f0185c52e69d8aef486c6d10951bb">using the exported tiles in your RGBDS assembler code</a></li></ol></li></ol></li><li><a href="#head-d700b18958fb6ca4212fd6dc2facb64eaf61be1d">Gameboy Map Builder</a><ol><li><a href="#head-3817c27750009969a5c492b0abb53e7d7d46f027">overview</a></li><li><a href="#head-b33fc876ee241f0f5167e31a6aa6dfb87c4c5891-2">import/export</a><ol><li><a href="#head-70bcb5040c031a192998964e1e6c80c3212834f7">export from GBMB</a></li><li><a href="#head-e242286726e50c505e072169eeab015c5e0df1e1">using the exported map in your RGBDS assembler code</a></li></ol></li></ol></li></ol></li></ol></div> <span class="anchor" id="line-4"></span><em>links to the tile designer and map builder are available in the </em>GameBoy Design Utilities<em> section of the <a class="http" href="../software/index.htm">class software page</a></em> <span class="anchor" id="line-5"></span>
<h2 id="head-575156eff9048ac8d7a0d9fd282dea263eb9b083">GameBoy Tile Designer</h2>
<span class="anchor" id="line-6"></span><p class="line867">
</p><h3 id="head-221a443801ebd3dd6362a1059d73c40bb34cf99e">Overview</h3>
<span class="anchor" id="line-7"></span><ul><li>the help menu is good. <span class="anchor" id="line-8"></span></li><li>the numbers vertically ordered on the left-hand-side correspond to tile numbers <span class="anchor" id="line-9"></span></li><li>the 0,1,2,3 boxes at the bottom correspond to the palette choice for the tiles. <span class="anchor" id="line-10"></span><ul><li><p class="line862">Tile Designer defaults to the standard palette that we have been using i.e. the standard palette that is loaded in lines 47 and 48 of <tt>hello-world.asm</tt>: <span class="anchor" id="line-11"></span></p><pre>        ld      a, %11100100    ; Window palette colors, from darkest to lightest
<span class="anchor" id="line-12"></span>        ld      [rBGP], a               ; CLEAR THE SCREEN </pre><span class="anchor" id="line-13"></span></li><li>you can change the palette by pressing the down and up arrows to the left of the palette numbers <span class="anchor" id="line-14"></span></li></ul></li><li>the L and R to the left of the palette numbers correspond to what color is choosen on the tile when you click the left or right mouse button. <span class="anchor" id="line-15"></span><ul><li>to change what color you wish to place with the L or R mouse button, L or R click on the palette numbers <span class="anchor" id="line-16"></span></li></ul></li><li>the large grid is your tile design. <span class="anchor" id="line-17"></span></li><li>the left icons/menu is fairly self-explanatory, and there is help available inside the application on these. <span class="anchor" id="line-18"></span></li></ul><p class="line867">
</p><h3 id="head-b33fc876ee241f0f5167e31a6aa6dfb87c4c5891">import/export</h3>
<span class="anchor" id="line-19"></span><p class="line867">
</p><h4 id="head-f32b8c7ed0a020d68952304ce6eadbbafbdc67a6">export from GBTD</h4>
<span class="anchor" id="line-20"></span><p class="line867"><em>make sure you save your tiles in GMTD's native format first. This is needed for when you want to edit the tiles later or use them in the map builder. After you have done this, it is easy to also export your tiles for use in your assembler code:</em> <span class="anchor" id="line-21"></span></p><ul><li><p class="line862">choose <tt>Export&nbsp;to...</tt> in the File menu. Here's a rundown of your choices in the dialog box that comes out: <span class="anchor" id="line-22"></span></p><ul><li><p class="line862">filename is up to you. I'll assume you use <tt>Export.z80</tt> for this example <span class="anchor" id="line-23"></span></p></li><li><p class="line862">choose <tt>RGBDS&nbsp;Assembly&nbsp;file&nbsp;(*.z80)</tt> as your file type <span class="anchor" id="line-24"></span></p></li><li><p class="line862">you can change the names of the section and the label, but for this example I'll assume you leave them as <tt>TileLabel</tt> and <tt>Tiles</tt> <span class="anchor" id="line-25"></span></p></li><li><p class="line891"><tt>Bank</tt> is not needed for our purposes <span class="anchor" id="line-26"></span></p></li><li><p class="line891"><tt>From</tt>, <tt>To</tt> is where you choose what tile numbers you want to export. <span class="anchor" id="line-27"></span></p><ul><li><p class="line862">It is very important to fill this out with the correct tile range. The default range of <tt>0</tt>, <tt>0</tt> is going to get you just the first tile. <span class="anchor" id="line-28"></span></p></li></ul></li><li><p class="line862">For <tt>Format</tt> choose either <tt>Gameboy&nbsp;4&nbsp;color</tt> if you used shades of gray or <tt>Gameboy&nbsp;2&nbsp;color</tt> if you used just monochrome, like our <tt>ibmpc1.inc</tt> text font. <span class="anchor" id="line-29"></span></p></li><li><p class="line862">leave <tt>Counter</tt> set to <tt>none</tt>. <span class="anchor" id="line-30"></span></p></li><li><p class="line862">if you have any reason to refer to each tile individually (for example you want to load tiles 0-8 at one point and tiles 5-9 at a different point), leave <tt>Export&nbsp;tiles&nbsp;as&nbsp;one&nbsp;unit</tt> unchecked. Otherwise, check that box. In most cases you will want to check the box. <span class="anchor" id="line-31"></span></p></li><li><p class="line862">Compression and Decompression is a complication we won't need, so leave the <tt>GB-Compress&nbsp;data</tt> box unchecked. <span class="anchor" id="line-32"></span></p></li></ul></li><li><p class="line862">choose <tt>ok</tt> and two files will be created: <tt>export.inc</tt> and <tt>export.z80</tt>. <span class="anchor" id="line-33"></span></p><ul><li><p class="line862">Will will not need <tt>export.inc</tt> but <tt>export.z80</tt> has got everything we need, so take a look at it so you have some intuition of what is going on. <span class="anchor" id="line-34"></span></p></li></ul></li></ul><p class="line867">
</p><h4 id="head-bcc30779af6f0185c52e69d8aef486c6d10951bb">using the exported tiles in your RGBDS assembler code</h4>
<span class="anchor" id="line-35"></span><ul><li><p class="line862">move the <tt>export.z80</tt> file to the directory where your other include files and your assembly code is <span class="anchor" id="line-36"></span></p></li><li><p class="line862">add to your assembly code <span class="anchor" id="line-37"></span></p><pre>INCLUDE "export.z80" </pre><span class="anchor" id="line-38"></span>where your include files are referenced in your code. <span class="anchor" id="line-39"></span></li><li>load your tiles in your code. Here are some examples, but you may need to alter these slightly depending on whether or not you are also loading other tiles from another set. This code should be executed during initialization. <span class="anchor" id="line-40"></span><ul><li><p class="line862">Exported as Gameboy 2 color: <span class="anchor" id="line-41"></span></p><pre>        ld      hl, TileLabel      ; You chose this name in the export dialog box of GBTD
<span class="anchor" id="line-42"></span>        ld      de, _VRAM               ; _VRAM=$8000=tile pattern table 0. If you wish to load into tile pattern table 1, choose $8800
<span class="anchor" id="line-43"></span>        ld      bc, 8*&lt;number of tiles you wish to load&gt;
<span class="anchor" id="line-44"></span>        call    mem_CopyMono    ; load tile data </pre><span class="anchor" id="line-45"></span></li><li><p class="line862">Exported as Gameboy 4 color: <span class="anchor" id="line-46"></span></p><pre>        ld      hl, TileLabel      ; You chose this name in the export dialog box of GBTD
<span class="anchor" id="line-47"></span>        ld      de, _VRAM               ; _VRAM=$8000=tile pattern table 0. If you wish to load into tile pattern table 1, choose $8800
<span class="anchor" id="line-48"></span>        ld      bc, 16*&lt;number of tiles you wish to load&gt;
<span class="anchor" id="line-49"></span>        call    mem_Copy        ; load tile data </pre><span class="anchor" id="line-50"></span></li></ul></li></ul><p class="line867">
</p><h2 id="head-d700b18958fb6ca4212fd6dc2facb64eaf61be1d">Gameboy Map Builder</h2>
<span class="anchor" id="line-51"></span><p class="line867"><em>this is only to get you started. Help within the app is excellent and should serve you well.</em> <span class="anchor" id="line-52"></span>
</p><h3 id="head-3817c27750009969a5c492b0abb53e7d7d46f027">overview</h3>
<span class="anchor" id="line-53"></span><ul><li><p class="line862">go to <tt>Map&nbsp;Properties...</tt> in the <tt>File</tt> menu to load a tileset you created with GMTD <span class="anchor" id="line-54"></span></p><ul><li>you also set the size of your map here, be it 10x10, 20x18 or 32x32 tiles <span class="anchor" id="line-55"></span><ul><li><p class="line862">I suggest and, for this example, I assume a 32x32 tile map. <em>If your map is not 32 columns, you will need to change the assembler code example below when using the map in your code.</em> <span class="anchor" id="line-56"></span></p></li></ul></li></ul></li><li>select the tile you want to place on the map by clicking it with either the L or R mouse button on the tile list. <span class="anchor" id="line-57"></span></li><li>use the L mouse button to select tiles on the map. Hit the spacebar to change all the selected tiles on the map to the tile you selected in the tile list. <span class="anchor" id="line-58"></span></li><li>use the R mouse button to change one tile on the map to the selected tile on the tile list. <span class="anchor" id="line-59"></span></li></ul><p class="line867">
</p><h3 id="head-b33fc876ee241f0f5167e31a6aa6dfb87c4c5891-2">import/export</h3>
<span class="anchor" id="line-60"></span><p class="line867">
</p><h4 id="head-70bcb5040c031a192998964e1e6c80c3212834f7">export from GBMB</h4>
<span class="anchor" id="line-61"></span><p class="line867"><em>make sure you save your tiles in GMMB's native format first. This is needed for when you want to edit the map later. After you have done this, it is easy to also export your map for use in your assembler code:</em> <span class="anchor" id="line-62"></span></p><ul><li><p class="line862">choose <tt>Export&nbsp;to...</tt> in the File menu. Here's a rundown of your choices in the dialog box that comes out: <span class="anchor" id="line-63"></span></p><ul><li><p class="line862">under the <tt>standard</tt> tab: <span class="anchor" id="line-64"></span></p><ul><li><p class="line862">filename is up to you. I'll assume you use <tt>ExportMap.z80</tt> for this example <span class="anchor" id="line-65"></span></p></li><li><p class="line862">choose <tt>RGBDS&nbsp;Assembly&nbsp;file&nbsp;(*.z80)</tt> as your file type <span class="anchor" id="line-66"></span></p></li><li><p class="line862">you can change the names of the section and the label, but for this example I'll assume you leave them as <tt>TileMapLabel</tt> and <tt>TileMap</tt> <span class="anchor" id="line-67"></span></p></li><li><p class="line891"><tt>Bank</tt> is not needed for our purposes <span class="anchor" id="line-68"></span></p></li><li><p class="line891"><tt>Split&nbsp;data</tt> allows you to add labels for easy referral between sets of blocks. For example, if you wanted a label between every line of 32 blogs, you would check the <tt>Split&nbsp;Data</tt> box and choose a block size of 32. <span class="anchor" id="line-69"></span></p><ul><li><p class="line862">In this basic case we will leave <tt>Split&nbsp;data&nbsp;unchecked.</tt> <span class="anchor" id="line-70"></span></p></li><li><p class="line862">Leave <tt>change&nbsp;bank&nbsp;for&nbsp;each&nbsp;block</tt> unchecked. It will not be needed for all but the most memory-intensive apps. <span class="anchor" id="line-71"></span></p></li></ul></li></ul></li></ul></li><li><p class="line891"><tt>Location&nbsp;format</tt> tab: <em>there's a million ways we could do this but the simplest and most consistent with how we have handled maps in the past:</em> <span class="anchor" id="line-72"></span></p><ul><li><p class="line862">under <tt>Location&nbsp;format</tt> choose <tt>Property</tt> of <tt>[Tile&nbsp;number:&nbsp;Low&nbsp;8]</tt> <span class="anchor" id="line-73"></span></p></li><li><p class="line862">choose <tt>map&nbsp;layout</tt> of <tt>Rows</tt> <span class="anchor" id="line-74"></span></p></li><li><p class="line891"><tt>Plane&nbsp;count</tt>: <tt>1&nbsp;plane&nbsp;(8&nbsp;bits)</tt> <span class="anchor" id="line-75"></span></p></li><li><p class="line891"><tt>Plane&nbsp;Order</tt>: <tt>Tiles&nbsp;are&nbsp;continues</tt> (sic) <span class="anchor" id="line-76"></span></p></li><li><p class="line891"><tt>Tile&nbsp;offset</tt>: <tt>0</tt> <span class="anchor" id="line-77"></span></p></li></ul></li><li><p class="line862">now <strong>finally</strong> hit OK and let the magic happen... <span class="anchor" id="line-78"></span></p></li><li><p class="line862">GBMB will create <tt>ExportMap.inc</tt> and <tt>ExportMap.z80</tt>. We will not need <tt>ExportMap.inc</tt> but <tt>ExportMap.z80</tt> has got everything we need, so take a look at it so you have some intuition of what is going on. <span class="anchor" id="line-79"></span></p></li></ul><p class="line867">
</p><h4 id="head-e242286726e50c505e072169eeab015c5e0df1e1">using the exported map in your RGBDS assembler code</h4>
<span class="anchor" id="line-80"></span><ul><li>make sure you already have your assembler code to read the exported tiles as explained above in the GBTD section. <span class="anchor" id="line-81"></span></li><li><p class="line862">move the <tt>ExportMap.z80</tt> file to the directory where your other include files and your assembly code is <span class="anchor" id="line-82"></span></p></li><li><p class="line862">add to your assembly code <span class="anchor" id="line-83"></span></p><pre>INCLUDE "ExportMap.z80" </pre><span class="anchor" id="line-84"></span>where your include files are referenced in your code. <span class="anchor" id="line-85"></span></li><li><p class="line862">load your tiles in your code. Here are some examples, but you may need to alter these slightly depending on whether or not you are also loading other tiles from another set. This code should be executed after you load your tiles: <span class="anchor" id="line-86"></span></p><pre>        ld      hl,TileMapLabel ; THIS IS THE LABEL NAME YOU CHOSE WHEN YOU EXPORTED FROM GBMB
<span class="anchor" id="line-87"></span>        ld      de, _SCRN0+0+(SCRN_VY_B*0) ; LOCATION IN BACKGROUN TILE MAP WHERE YOU WANT TO STARTING LOADING YOUR MAP DATA. WE ARE ASSUMING YOU WANT TO LOAD THE MAP DATA FROM THE UPPER LEFT (ROW 0 COLUMN 0)
<span class="anchor" id="line-88"></span>        ld      bc, 32*32 ; SIZE OF MAP DATA. IF YOU CHANGE THE NUMBER OF COLUMNS IN YOUR MAP DATA, THIS WILL NOT WORK.
<span class="anchor" id="line-89"></span>        call    mem_CopyVRAM ; DO THE MAGIC </pre><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span></li></ul><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">ECE238Spr08/tutorials/GameBoyTileDesigner  (last edited 2008-02-23 17:58:46 by <span title="JohnHarrison @ ip68-103-181-172.ks.ok.cox.net[68.103.181.172]"><a href="../../JohnHarrison.htm" title="JohnHarrison @ ip68-103-181-172.ks.ok.cox.net[68.103.181.172]">JohnHarrison</a></span>)</p>

<div id="pagebottom"></div>
</div>

</body>
</html>